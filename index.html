<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donut Bliss - Ordering System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* All the CSS styles remain exactly the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4a90e2;
            --secondary: #87ceeb;
            --accent: #6ab0de;
            --dark: #2c5aa0;
            --light: #f0f8ff;
            --gray: #6c757d;
            --blue: #b3d9ff;
            --dark-blue: #6ab0de;
            --text: #2c3e50;
        }

        body {
            background-color: #f8fbff;
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background-color: var(--dark);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--secondary);
            font-size: 1.8rem;
        }

        .logo h1 {
            font-size: 1.8rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
            align-items: center;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--secondary);
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark), var(--primary));
            padding: 1rem;
        }

        .login-logo-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            order: 2;
        }

        .login-logo {
            width: 100%;
            max-width: 400px;
            height: 400px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 8px solid white;
        }

        .login-form-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            order: 1;
        }

        .login-box {
            background: var(--blue);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 2rem;
            width: 100%;
            max-width: 400px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .login-header h2 {
            color: var(--dark);
            margin-bottom: 0.5rem;
        }

        .user-type-selector {
            display: flex;
            margin-bottom: 1.5rem;
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid var(--gray);
        }

        .user-type {
            flex: 1;
            text-align: center;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .user-type.active {
            background: var(--dark);
            color: white;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .register-link {
            text-align: center;
            margin-top: 1rem;
        }

        .register-link a {
            color: var(--dark);
            text-decoration: none;
            font-weight: 500;
        }

        .register-link a:hover {
            text-decoration: underline;
        }

        /* Dashboard Styles */
        .dashboard {
            min-height: 100vh;
            display: flex;
            background-color: var(--light);
        }

        .sidebar {
            width: 250px;
            background: var(--dark);
            color: white;
            padding: 1.5rem;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 100;
        }

        .sidebar h3 {
            margin-bottom: 1rem;
            color: var(--secondary);
            text-align: center;
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar li {
            margin-bottom: 0.5rem;
        }

        .sidebar a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 0.75rem;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .sidebar a:hover, .sidebar a.active {
            background: rgba(255,255,255,0.1);
        }

        .dashboard-content {
            flex: 1;
            margin-left: 250px;
            padding: 1.5rem;
            transition: margin-left 0.3s ease;
            background-color: var(--light);
        }

        .section-title {
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary);
            color: var(--dark);
        }

        /* Menu Items Styles */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .menu-item {
            border: 1px solid var(--secondary);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            background: white;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.2);
        }

        .menu-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .menu-item-content {
            padding: 1rem;
        }

        .menu-item h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .menu-item p {
            color: var(--text);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .menu-item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-weight: bold;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .add-to-cart {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .add-to-cart:hover {
            background: #5a9fd8;
        }

        /* Cart Styles */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--secondary);
        }

        .cart-item-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
        }

        .cart-item-info h4 {
            margin-bottom: 0.5rem;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            background: var(--light);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .remove-btn {
            background: #f8d7da;
            color: #721c24;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .remove-btn:hover {
            background: #f1b0b7;
        }

        .cart-summary {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 2px solid var(--secondary);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .summary-total {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--dark);
        }

        .checkout-btn {
            margin-top: 1rem;
            background: var(--accent);
            width: 100%;
        }

        .checkout-btn:hover {
            background: #5a9fd8;
        }

        /* Payment Options */
        .payment-options {
            margin-top: 2rem;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);
        }

        .payment-option {
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid var(--secondary);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-option:hover {
            background: var(--light);
        }

        .payment-option.selected {
            border-color: var(--accent);
            background: #e6f2ff;
        }

        .payment-option input {
            margin-right: 10px;
        }

        .reference-input {
            margin-top: 1rem;
            display: none;
        }

        .reference-input.show {
            display: block;
        }

        /* Order History Styles */
        .order-card {
            border: 1px solid var(--secondary);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            background: white;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .order-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-confirmed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-preparing {
            background: #fff3cd;
            color: #856404;
        }

        .status-ready {
            background: #d4edda;
            color: #155724;
        }

        .status-pickedup {
            background: #cce7ff;
            color: #004085;
        }

        .status-delivered {
            background: #e2e3e5;
            color: #383d41;
        }

        .status-completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .status-failed {
            background: #f5c6cb;
            color: #721c24;
        }

        .order-items {
            margin-bottom: 1rem;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        /* Enhanced Order Status Tracking */
        .order-tracking {
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .tracking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .tracking-title {
            font-weight: 600;
            color: var(--dark);
        }

        .tracking-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 2rem 0;
        }

        .tracking-steps::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #ddd;
            z-index: 1;
        }

        .tracking-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            transition: all 0.3s;
        }

        .step-label {
            font-size: 0.8rem;
            text-align: center;
            color: var(--gray);
        }

        .step-active .step-icon {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .step-completed .step-icon {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .step-completed .step-label {
            color: var(--text);
            font-weight: 500;
        }

        .step-active .step-label {
            color: var(--dark);
            font-weight: 600;
        }

        .tracking-info {
            margin-top: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 5px;
            border-left: 4px solid var(--accent);
        }

        .tracking-message {
            font-size: 0.9rem;
            color: var(--text);
        }

        .estimated-time {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Staff Dashboard Styles */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);
        }

        .orders-table th, .orders-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--secondary);
        }

        .orders-table th {
            background: var(--light);
            font-weight: 600;
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-right: 0.5rem;
            transition: all 0.3s;
        }

        .btn-confirmed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .btn-confirmed:hover {
            background: #bee5eb;
        }

        .btn-preparing {
            background: #fff3cd;
            color: #856404;
        }

        .btn-preparing:hover {
            background: #ffeaa7;
        }

        .btn-ready {
            background: #d4edda;
            color: #155724;
        }

        .btn-ready:hover {
            background: #c3e6cb;
        }

        .btn-pickedup {
            background: #cce7ff;
            color: #004085;
        }

        .btn-pickedup:hover {
            background: #a8d4ff;
        }

        .btn-delivered {
            background: #e2e3e5;
            color: #383d41;
        }

        .btn-delivered:hover {
            background: #d6d8db;
        }

        .btn-completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .btn-completed:hover {
            background: #bee5eb;
        }

        .btn-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .btn-cancelled:hover {
            background: #f1b0b7;
        }

        .btn-failed {
            background: #f5c6cb;
            color: #721c24;
        }

        .btn-failed:hover {
            background: #f1b0b7;
        }

        /* Admin Dashboard Styles */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid var(--secondary);
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom: 2px solid var(--dark);
            font-weight: 600;
        }

        .tab:hover {
            background: var(--light);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Form Styles for Admin */
        .admin-form {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row .form-group {
            flex: 1;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            background: var(--dark);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            z-index: 1000;
            cursor: pointer;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: fixed;
                transform: translateX(-100%);
                z-index: 999;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .dashboard-content {
                margin-left: 0;
                padding-top: 4rem;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .admin-stats {
                grid-template-columns: 1fr 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .cart-item-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .form-row {
                flex-direction: column;
            }

            .order-header {
                flex-direction: column;
                gap: 0.5rem;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }

            .orders-table {
                font-size: 0.9rem;
            }

            .orders-table th, .orders-table td {
                padding: 0.5rem;
            }

            /* Enhanced Order Tracking Responsive */
            .tracking-steps {
                flex-wrap: wrap;
                gap: 1rem;
            }

            .tracking-step {
                flex: 0 0 calc(50% - 0.5rem);
                margin-bottom: 1rem;
            }

            .tracking-steps::before {
                display: none;
            }

            /* Login Page Responsive */
            .login-container {
                flex-direction: column;
            }

            .login-logo-section {
                order: 1;
                padding: 1rem;
            }

            .login-logo {
                max-width: 250px;
                height: 250px;
            }

            .login-form-section {
                order: 2;
                padding: 1rem;
            }
        }

        @media (max-width: 480px) {
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .cart-item-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .form-row {
                flex-direction: column;
            }

            .btn {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }

            .action-btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
                margin-right: 0.25rem;
            }

            .orders-table {
                font-size: 0.8rem;
            }

            .orders-table th, .orders-table td {
                padding: 0.4rem;
            }

            /* Enhanced Order Tracking Responsive */
            .tracking-step {
                flex: 0 0 100%;
            }
        }

        /* Page Styles */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Add to Cart Animation */
        @keyframes addToCart {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .add-to-cart-animation {
            animation: addToCart 0.5s ease;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Logout Button Styling */
        .logout-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            width: 100%;
            justify-content: center;
        }

        .logout-btn:hover {
            background: #3a80d2;
        }

        /* Register Form Styles */
        .register-form {
            display: none;
        }

        .register-form.active {
            display: block;
        }

        .password-requirement {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 0.25rem;
        }

        .password-error {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 0.25rem;
        }

        /* Checkout Page Styles */
        .checkout-page {
            display: none;
        }

        .checkout-page.active {
            display: block;
        }

        .order-confirmation {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);
        }

        .confirmation-icon {
            font-size: 4rem;
            color: var(--accent);
            margin-bottom: 1rem;
        }

        /* Staff Header */
        .staff-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .staff-actions {
            display: flex;
            gap: 1rem;
        }

        /* Delivery Options */
        .delivery-options {
            margin-top: 2rem;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);
        }

        .delivery-option {
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid var(--secondary);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .delivery-option:hover {
            background: var(--light);
        }

        .delivery-option.selected {
            border-color: var(--accent);
            background: #e6f2ff;
        }

        .delivery-option input {
            margin-right: 10px;
        }

        .delivery-fee {
            font-weight: bold;
            color: var(--primary);
        }

        /* Image Upload Styles */
        .image-upload {
            margin-bottom: 1rem;
        }

        .image-preview {
            width: 100%;
            max-width: 200px;
            height: 150px;
            border: 1px dashed var(--secondary);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        /* Admin Table Styles */
        .admin-table-container {
            overflow-x: auto;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);
        }

        .admin-table th, .admin-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--secondary);
            white-space: nowrap;
        }

        .admin-table th {
            background: var(--light);
            font-weight: 600;
        }

        /* File Upload Styles */
        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: block;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload-label:hover {
            background: var(--light);
        }

        /* Login Button Styling */
        .login-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background 0.3s;
            width: 100%;
        }

        .login-btn:hover {
            background: #3a80d2;
        }
    </style>
</head>
<body>
    <!-- Header for Customer Dashboard -->
    <header id="customer-header" class="page">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-donate"></i>
                    <h1>Donut Bliss</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="nav-home">Home</a></li>
                        <li><a href="#" class="nav-menu">Menu</a></li>
                        <li><a href="#" class="nav-about">About Us</a></li>
                        <li><a href="#" class="nav-mission">Mission & Vision</a></li>
                        <li class="cart-icon" id="header-cart">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </li>
                        <li>
                            <button class="logout-btn" id="customer-header-logout" style="width: auto; padding: 0.5rem 1rem;">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Login Page -->
    <div id="login-page" class="page active">
        <div class="login-container">
            <div class="login-form-section">
                <div class="login-box">
                    <div class="login-header">
                        <h2>Welcome to Donut Bliss</h2>
                        <p>Please select your account type</p>
                    </div>
                    <div class="user-type-selector">
                        <div class="user-type active" data-type="customer">Customer</div>
                        <div class="user-type" data-type="staff">Staff</div>
                        <div class="user-type" data-type="admin">Admin</div>
                    </div>
                    
                    <!-- Login Form -->
                    <form id="login-form">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" class="form-control" required>
                        </div>
                        <button type="submit" class="login-btn">Login</button>
                    </form>
                    
                    <!-- Register Form (Only for Customers) -->
                    <div class="register-form" id="customer-register-form">
                        <h3 style="text-align: center; margin-bottom: 1rem;">Create Account</h3>
                        <form id="register-form">
                            <div class="form-group">
                                <label for="reg-username">Username</label>
                                <input type="text" id="reg-username" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="reg-email">Email</label>
                                <input type="email" id="reg-email" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="reg-password">Password</label>
                                <input type="password" id="reg-password" class="form-control" required>
                                <div class="password-requirement">Password must be at least 8 characters and contain letters and numbers</div>
                                <div class="password-error" id="password-error"></div>
                            </div>
                            <div class="form-group">
                                <label for="reg-confirm-password">Confirm Password</label>
                                <input type="password" id="reg-confirm-password" class="form-control" required>
                            </div>
                            <button type="submit" class="login-btn">Register</button>
                        </form>
                        <div class="register-link">
                            <p>Already have an account? <a href="#" id="show-login">Login here</a></p>
                        </div>
                    </div>
                    
                    <div class="register-link" id="login-register-link">
                        <p>Don't have an account? <a href="#" id="show-register">Register here</a></p>
                    </div>
                </div>
            </div>
            <div class="login-logo-section">
                <img src="logo.jpg" alt="Donut Bliss Logo" class="login-logo">
            </div>
        </div>
    </div>

    <!-- Customer Dashboard -->
    <div id="customer-dashboard" class="page">
        <div class="dashboard">
            <div class="sidebar" id="customer-sidebar">
                <h3>Customer Menu</h3>
                <ul>
                    <li><a href="#" class="sidebar-link active" data-page="customer-home">Home</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-menu">Menu</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-cart">Cart</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-orders">Order History</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-about">About Us</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-mission">Mission & Vision</a></li>
                </ul>
                <button class="logout-btn" id="customer-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            <div class="dashboard-content">
                <!-- Customer Home -->
                <div id="customer-home" class="customer-page active">
                    <h2 class="section-title">Welcome to Donut Bliss!</h2>
                    <div class="welcome-banner" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem; text-align: center;">
                        <h2>Fresh Donuts Made Daily</h2>
                        <p>Indulge in our delicious, handcrafted donuts made with the finest ingredients</p>
                    </div>
                    
                    <h3 class="section-title">Our Complete Menu</h3>
                    <div class="menu-grid" id="menu-items">
                        <!-- Menu items will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Customer Menu -->
                <div id="customer-menu" class="customer-page">
                    <h2 class="section-title">Our Donut Menu</h2>
                    <div class="menu-grid" id="menu-items-full">
                        <!-- Full menu items will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Customer Cart -->
                <div id="customer-cart" class="customer-page">
                    <h2 class="section-title">Your Cart</h2>
                    <div id="cart-items">
                        <!-- Cart items will be populated by JavaScript -->
                    </div>
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="cart-subtotal">₱0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping Fee:</span>
                            <span id="shipping-fee">₱0.00</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>Total:</span>
                            <span id="cart-total">₱0.00</span>
                        </div>
                        <button class="btn checkout-btn" id="checkout-btn">Proceed to Checkout</button>
                    </div>
                </div>

                <!-- Checkout Page -->
                <div id="customer-checkout" class="customer-page checkout-page">
                    <h2 class="section-title">Checkout</h2>
                    <div class="order-summary">
                        <h3>Order Summary</h3>
                        <div id="checkout-items">
                            <!-- Checkout items will be populated by JavaScript -->
                        </div>
                        <div class="cart-summary">
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="checkout-subtotal">₱0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Shipping Fee:</span>
                                <span id="checkout-shipping">₱0.00</span>
                            </div>
                            <div class="summary-row summary-total">
                                <span>Total:</span>
                                <span id="checkout-total">₱0.00</span>
                            </div>
                        </div>
                    </div>

                    <div class="delivery-options">
                        <h3>Select Delivery Method</h3>
                        <div class="delivery-option" data-method="pickup">
                            <input type="radio" id="pickup" name="delivery" value="pickup">
                            <label for="pickup">Pickup at Store</label>
                            <span class="delivery-fee">₱0.00</span>
                        </div>
                        <div class="delivery-option" data-method="grab">
                            <input type="radio" id="grab" name="delivery" value="grab">
                            <label for="grab">Grab Delivery</label>
                            <span class="delivery-fee">₱50.00</span>
                        </div>
                        <div class="delivery-option" data-method="foodpanda">
                            <input type="radio" id="foodpanda" name="delivery" value="foodpanda">
                            <label for="foodpanda">FoodPanda Delivery</label>
                            <span class="delivery-fee">₱50.00</span>
                        </div>
                    </div>

                    <div class="payment-options">
                        <h3>Select Payment Method</h3>
                        <div class="payment-option" data-method="cash">
                            <input type="radio" id="cash" name="payment" value="cash">
                            <label for="cash">Cash on Delivery</label>
                        </div>
                        <div class="payment-option" data-method="gcash">
                            <input type="radio" id="gcash" name="payment" value="gcash">
                            <label for="gcash">GCash</label>
                            <div class="reference-input" id="gcash-reference">
                                <div class="form-group">
                                    <label for="gcash-ref">GCash Reference Number</label>
                                    <input type="text" id="gcash-ref" class="form-control" placeholder="Enter reference number">
                                </div>
                            </div>
                        </div>
                        <div class="payment-option" data-method="paymaya">
                            <input type="radio" id="paymaya" name="payment" value="paymaya">
                            <label for="paymaya">PayMaya</label>
                            <div class="reference-input" id="paymaya-reference">
                                <div class="form-group">
                                    <label for="paymaya-ref">PayMaya Reference Number</label>
                                    <input type="text" id="paymaya-ref" class="form-control" placeholder="Enter reference number">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button class="btn checkout-btn" id="place-order-btn" style="margin-top: 2rem;">Place Order</button>
                    <button class="btn" id="back-to-cart" style="margin-top: 1rem; background: var(--gray);">Back to Cart</button>
                </div>

                <!-- Order Confirmation -->
                <div id="order-confirmation" class="customer-page checkout-page">
                    <div class="order-confirmation">
                        <div class="confirmation-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2>Order Confirmed!</h2>
                        <p>Your order has been successfully placed.</p>
                        <div id="order-details">
                            <!-- Order details will be populated by JavaScript -->
                        </div>
                        <p style="margin-top: 1rem;">Thank you for choosing Donut Bliss!</p>
                        <div style="margin-top: 1.5rem;">
                            <button class="btn checkout-btn" id="view-order-history" style="margin-right: 1rem;">View Order History</button>
                            <button class="btn" id="back-to-home">Back to Home</button>
                        </div>
                    </div>
                </div>
                
                <!-- Customer Orders -->
                <div id="customer-orders" class="customer-page">
                    <h2 class="section-title">Your Order History</h2>
                    <div id="order-history">
                        <!-- Order history will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Customer About Us -->
                <div id="customer-about" class="customer-page">
                    <h2 class="section-title">About Us</h2>
                    <div class="about-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);">
                        <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Story</h3>
                        <p>Donut Bliss has been serving the community with freshly baked, delicious donuts since 2010. Our passion for quality and creativity drives us to create unique flavor combinations that keep our customers coming back for more.</p>
                        <p>We believe in using only the finest ingredients, from our locally sourced dairy to our premium flours and flavorings. Every donut is handcrafted with care and attention to detail.</p>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Values</h3>
                        <ul style="padding-left: 1.5rem;">
                            <li><strong>Quality:</strong> We never compromise on the quality of our ingredients or our products.</li>
                            <li><strong>Creativity:</strong> We're always experimenting with new flavors and combinations.</li>
                            <li><strong>Community:</strong> We're proud to be part of the local community and support local events.</li>
                            <li><strong>Sustainability:</strong> We're committed to environmentally friendly practices in our operations.</li>
                        </ul>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Team</h3>
                        <p>Our dedicated team of bakers and staff work tirelessly to ensure every donut that leaves our kitchen is perfect. From our master baker with over 20 years of experience to our friendly counter staff, everyone at Donut Bliss is passionate about creating sweet moments for our customers.</p>
                    </div>
                </div>
                
                <!-- Customer Mission & Vision -->
                <div id="customer-mission" class="customer-page">
                    <h2 class="section-title">Our Mission & Vision</h2>
                    <div class="mission-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Mission</h3>
                                <p>To create moments of happiness by serving the most delicious, fresh, and creative donuts while providing exceptional customer service and building strong community connections.</p>
                                <p>We believe that a great donut can brighten anyone's day, and we're committed to making that experience accessible to everyone through:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Consistently high-quality products</li>
                                    <li>Innovative flavor combinations</li>
                                    <li>Friendly and efficient service</li>
                                    <li>Fair and transparent pricing</li>
                                </ul>
                            </div>
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Vision</h3>
                                <p>To become the most beloved donut shop in the region, known for our innovation, quality, and commitment to making every customer's day a little sweeter.</p>
                                <p>We envision a future where:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Donut Bliss is the first choice for donut lovers</li>
                                    <li>Our brand represents excellence and creativity</li>
                                    <li>We've expanded to serve more communities</li>
                                    <li>We continue to innovate while staying true to our roots</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--secondary);">
                            <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Commitment</h3>
                            <p>At Donut Bliss, we're committed to more than just making great donuts. We're committed to:</p>
                            <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                <li><strong>Sustainability:</strong> Using eco-friendly packaging and reducing waste</li>
                                <li><strong>Community:</strong> Supporting local charities and events</li>
                                <li><strong>Innovation:</strong> Constantly developing new flavors and products</li>
                                <li><strong>Quality:</strong> Never compromising on our high standards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Staff Dashboard -->
    <div id="staff-dashboard" class="page">
        <div class="dashboard">
            <div class="sidebar" id="staff-sidebar">
                <h3>Staff Menu</h3>
                <ul>
                    <li><a href="#" class="sidebar-link active" data-page="staff-orders">Manage Orders</a></li>
                    <li><a href="#" class="sidebar-link" data-page="staff-about">About Us</a></li>
                    <li><a href="#" class="sidebar-link" data-page="staff-mission">Mission & Vision</a></li>
                </ul>
                <button class="logout-btn" id="staff-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            <div class="dashboard-content">
                <!-- Staff Orders -->
                <div id="staff-orders" class="staff-page active">
                    <div class="staff-header">
                        <h2 class="section-title">Order Management</h2>
                    </div>
                    <div class="table-container" style="overflow-x: auto;">
                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer Name</th>
                                    <th>Items</th>
                                    <th>Total</th>
                                    <th>Order Type</th>
                                    <th>Status</th>
                                    <th>Payment</th>
                                    <th>Reference No.</th>
                                    <th>Update Status</th>
                                </tr>
                            </thead>
                            <tbody id="staff-orders-table">
                                <!-- Orders will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Staff About Us -->
                <div id="staff-about" class="staff-page">
                    <h2 class="section-title">About Us</h2>
                    <div class="about-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);">
                        <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Story</h3>
                        <p>Donut Bliss has been serving the community with freshly baked, delicious donuts since 2010. Our passion for quality and creativity drives us to create unique flavor combinations that keep our customers coming back for more.</p>
                        <p>We believe in using only the finest ingredients, from our locally sourced dairy to our premium flours and flavorings. Every donut is handcrafted with care and attention to detail.</p>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Values</h3>
                        <ul style="padding-left: 1.5rem;">
                            <li><strong>Quality:</strong> We never compromise on the quality of our ingredients or our products.</li>
                            <li><strong>Creativity:</strong> We're always experimenting with new flavors and combinations.</li>
                            <li><strong>Community:</strong> We're proud to be part of the local community and support local events.</li>
                            <li><strong>Sustainability:</strong> We're committed to environmentally friendly practices in our operations.</li>
                        </ul>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Team</h3>
                        <p>Our dedicated team of bakers and staff work tirelessly to ensure every donut that leaves our kitchen is perfect. From our master baker with over 20 years of experience to our friendly counter staff, everyone at Donut Bliss is passionate about creating sweet moments for our customers.</p>
                    </div>
                </div>
                
                <!-- Staff Mission & Vision -->
                <div id="staff-mission" class="staff-page">
                    <h2 class="section-title">Our Mission & Vision</h2>
                    <div class="mission-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Mission</h3>
                                <p>To create moments of happiness by serving the most delicious, fresh, and creative donuts while providing exceptional customer service and building strong community connections.</p>
                                <p>We believe that a great donut can brighten anyone's day, and we're committed to making that experience accessible to everyone through:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Consistently high-quality products</li>
                                    <li>Innovative flavor combinations</li>
                                    <li>Friendly and efficient service</li>
                                    <li>Fair and transparent pricing</li>
                                </ul>
                            </div>
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Vision</h3>
                                <p>To become the most beloved donut shop in the region, known for our innovation, quality, and commitment to making every customer's day a little sweeter.</p>
                                <p>We envision a future where:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Donut Bliss is the first choice for donut lovers</li>
                                    <li>Our brand represents excellence and creativity</li>
                                    <li>We've expanded to serve more communities</li>
                                    <li>We continue to innovate while staying true to our roots</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--secondary);">
                            <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Commitment</h3>
                            <p>At Donut Bliss, we're committed to more than just making great donuts. We're committed to:</p>
                            <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                <li><strong>Sustainability:</strong> Using eco-friendly packaging and reducing waste</li>
                                <li><strong>Community:</strong> Supporting local charities and events</li>
                                <li><strong>Innovation:</strong> Constantly developing new flavors and products</li>
                                <li><strong>Quality:</strong> Never compromising on our high standards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-dashboard" class="page">
        <div class="dashboard">
            <div class="sidebar" id="admin-sidebar">
                <h3>Admin Menu</h3>
                <ul>
                    <li><a href="#" class="sidebar-link active" data-page="admin-overview">All Orders</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-menu">Menu Management</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-users">User Management</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-about">About Us</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-mission">Mission & Vision</a></li>
                </ul>
                <button class="logout-btn" id="admin-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            <div class="dashboard-content">
                <!-- Admin Overview -->
                <div id="admin-overview" class="admin-page active">
                    <h2 class="section-title">All Orders</h2>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Items</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Parts</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="admin-orders-table">
                                <!-- Orders will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin Menu Management -->
                <div id="admin-menu" class="admin-page">
                    <h2 class="section-title">Menu Management</h2>
                    <div class="admin-form">
                        <h3>Add New Menu Item</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="item-name">Name</label>
                                <input type="text" id="item-name" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="item-price">Price</label>
                                <input type="number" id="item-price" class="form-control" step="0.01">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="item-description">Description</label>
                            <textarea id="item-description" class="form-control" rows="3"></textarea>
                        </div>
                        <div class="form-group image-upload">
                            <label for="item-image">Image</label>
                            <div class="file-upload">
                                <input type="file" id="item-image" accept="image/*">
                                <label for="item-image" class="file-upload-label">Choose Image</label>
                            </div>
                            <div class="image-preview" id="image-preview">
                                <span>Image Preview</span>
                            </div>
                        </div>
                        <button class="btn" id="add-menu-item">Add Item</button>
                    </div>
                    
                    <h3 class="section-title">Current Menu Items</h3>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Price</th>
                                    <th>Image</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-menu-table">
                                <!-- Menu items will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin User Management -->
                <div id="admin-users" class="admin-page">
                    <h2 class="section-title">User Management</h2>
                    <div class="admin-form">
                        <h3>Add New User</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="user-username">Username</label>
                                <input type="text" id="user-username" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="user-email">Email</label>
                                <input type="email" id="user-email" class="form-control">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="user-password">Password</label>
                                <input type="password" id="user-password" class="form-control">
                                <div class="password-requirement">Password must be at least 8 characters and contain letters and numbers</div>
                                <div class="password-error" id="admin-password-error"></div>
                            </div>
                            <div class="form-group">
                                <label for="user-role">Role</label>
                                <select id="user-role" class="form-control">
                                    <option value="customer">Customer</option>
                                    <option value="staff">Staff</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn" id="add-user">Add User</button>
                    </div>
                    
                    <h3 class="section-title">Current Users</h3>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-users-table">
                                <!-- Users will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin About Us -->
                <div id="admin-about" class="admin-page">
                    <h2 class="section-title">About Us</h2>
                    <div class="about-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);">
                        <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Story</h3>
                        <p>Donut Bliss has been serving the community with freshly baked, delicious donuts since 2010. Our passion for quality and creativity drives us to create unique flavor combinations that keep our customers coming back for more.</p>
                        <p>We believe in using only the finest ingredients, from our locally sourced dairy to our premium flours and flavorings. Every donut is handcrafted with care and attention to detail.</p>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Values</h3>
                        <ul style="padding-left: 1.5rem;">
                            <li><strong>Quality:</strong> We never compromise on the quality of our ingredients or our products.</li>
                            <li><strong>Creativity:</strong> We're always experimenting with new flavors and combinations.</li>
                            <li><strong>Community:</strong> We're proud to be part of the local community and support local events.</li>
                            <li><strong>Sustainability:</strong> We're committed to environmentally friendly practices in our operations.</li>
                        </ul>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Team</h3>
                        <p>Our dedicated team of bakers and staff work tirelessly to ensure every donut that leaves our kitchen is perfect. From our master baker with over 20 years of experience to our friendly counter staff, everyone at Donut Bliss is passionate about creating sweet moments for our customers.</p>
                    </div>
                </div>
                
                <!-- Admin Mission & Vision -->
                <div id="admin-mission" class="admin-page">
                    <h2 class="section-title">Our Mission & Vision</h2>
                    <div class="mission-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(44, 90, 160, 0.1);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Mission</h3>
                                <p>To create moments of happiness by serving the most delicious, fresh, and creative donuts while providing exceptional customer service and building strong community connections.</p>
                                <p>We believe that a great donut can brighten anyone's day, and we're committed to making that experience accessible to everyone through:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Consistently high-quality products</li>
                                    <li>Innovative flavor combinations</li>
                                    <li>Friendly and efficient service</li>
                                    <li>Fair and transparent pricing</li>
                                </ul>
                            </div>
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Vision</h3>
                                <p>To become the most beloved donut shop in the region, known for our innovation, quality, and commitment to making every customer's day a little sweeter.</p>
                                <p>We envision a future where:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Donut Bliss is the first choice for donut lovers</li>
                                    <li>Our brand represents excellence and creativity</li>
                                    <li>We've expanded to serve more communities</li>
                                    <li>We continue to innovate while staying true to our roots</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--secondary);">
                            <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Commitment</h3>
                            <p>At Donut Bliss, we're committed to more than just making great donuts. We're committed to:</p>
                            <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                <li><strong>Sustainability:</strong> Using eco-friendly packaging and reducing waste</li>
                                <li><strong>Community:</strong> Supporting local charities and events</li>
                                <li><strong>Innovation:</strong> Constantly developing new flavors and products</li>
                                <li><strong>Quality:</strong> Never compromising on our high standards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Menu items (20 items)
        let menuItems = [
            { id: 1, name: "Classic Glazed", description: "Our signature soft and fluffy glazed donut", price: 50.00, image: "https://i.pinimg.com/1200x/77/a9/45/77a945ea4c793ee7c4aa3bf350d01f7d.jpg" },
            { id: 2, name: "Chocolate Frosted", description: "Rich chocolate frosting on a classic donut", price: 60.00, image: "https://i.pinimg.com/736x/1c/91/90/1c919050ebb3d92c39fde42f56612840.jpg" },
            { id: 3, name: "Strawberry Sprinkles", description: "Sweet strawberry glaze with colorful sprinkles", price: 65.00, image: "Strawberry Sprinkles.jpg" },
            { id: 4, name: "Boston Cream", description: "Custard-filled donut with chocolate glaze", price: 70.00, image: "https://i.pinimg.com/1200x/93/bc/9e/93bc9e0c2b80ec6a364e5628c8223b21.jpg" },
            { id: 5, name: "Maple Bacon", description: "Sweet maple glaze with crispy bacon bits", price: 80.00, image: "https://i.pinimg.com/1200x/ab/aa/1e/abaa1e3c778dc49ee1dbb91c50ba85f3.jpg" },
            { id: 6, name: "Blueberry Cake", description: "Moist blueberry cake donut with glaze", price: 65.00, image: "https://i.pinimg.com/736x/94/6f/ac/946face6b98f4359c025e89fffc6392e.jpg" },
            { id: 7, name: "Cinnamon Sugar", description: "Classic donut rolled in cinnamon sugar", price: 55.00, image: "https://i.pinimg.com/1200x/e1/7c/b2/e17cb2ab32b20d9f1c262fdc0c2d4011.jpg" },
            { id: 8, name: "Matcha Green Tea", description: "Earthy matcha glaze on a soft donut", price: 75.00, image: "https://i.pinimg.com/1200x/db/f4/63/dbf4632da03ee2582ff57c0a2379a076.jpg" },
            { id: 9, name: "Red Velvet", description: "Decadent red velvet donut with cream cheese frosting", price: 70.00, image: "https://i.pinimg.com/1200x/2a/db/eb/2adbebf32b997aa0a874ed21bd364205.jpg" },
            { id: 10, name: "Alcapone", description: "Zesty lemon glaze with poppy seeds", price: 65.00, image: "https://i.pinimg.com/736x/cd/81/0a/cd810ae51660488e2cf98bdfc00eb2f3.jpg" },
            { id: 11, name: "Cookies & Cream", description: "Chocolate donut with cookies and cream topping", price: 75.00, image: "Cookies & Cream.jpg" },
            { id: 12, name: "Salted Caramel", description: "Rich caramel glaze with a hint of sea salt", price: 70.00, image: "Salted Caramel.jpg" },
            { id: 13, name: "Peanut Butter Cup", description: "Chocolate donut with peanut butter filling", price: 80.00, image: "Peanut Butter Cup.jpg" },
            { id: 14, name: "Raspberry Filled", description: "Soft donut filled with raspberry jam", price: 70.00, image: "Raspberry Filled.jpg" },
            { id: 15, name: "Coconut Paradise", description: "Toasted coconut flakes on a vanilla glaze", price: 65.00, image: "Coconut Paradise.jpg" },
            { id: 16, name: "Double Chocolate", description: "Chocolate donut with chocolate glaze", price: 70.00, image: "Double Chocolate.jpg" },
            { id: 17, name: "Apple Cider", description: "Warm apple cider donut with cinnamon sugar", price: 60.00, image: "Apple Cider.jpg" },
            { id: 18, name: "Pumpkin Spice", description: "Seasonal pumpkin spice donut with cream cheese frosting", price: 75.00, image: "Pumpkin Spice.jpg" },
            { id: 19, name: "Lemon Burst", description: "Tangy lemon glaze with lemon zest", price: 65.00, image: "Lemon Burst.jpg" },
            { id: 20, name: "Mocha Madness", description: "Coffee-infused donut with mocha glaze", price: 75.00, image: "Mocha Madness.jpg" }
        ];

        // Sample orders for admin panel
        let orders = [
            { id: 6362, customer: "customer1", items: ["Classic Glazed (x2)", "Chocolate Frosted (x1)"], total: 160.00, status: "confirmed", date: "06/11/2025", orderType: "Delivery", paymentMethod: "GCash", referenceNumber: "GC123456789" },
            { id: 6670, customer: "customer1", items: ["Strawberry Sprinkles (x1)", "Boston Cream (x1)"], total: 135.00, status: "completed", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 4802, customer: "alien", items: ["Maple Bacon (x1)"], total: 80.00, status: "preparing", date: "06/11/2025", orderType: "Delivery", paymentMethod: "PayMaya", referenceNumber: "PM987654321" },
            { id: 4155, customer: "gsh", items: ["Blueberry Cake (x2)"], total: 130.00, status: "confirmed", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 8838, customer: "33", items: ["Matcha Green Tea (x1)", "Red Velvet (x1)"], total: 145.00, status: "ready", date: "06/11/2025", orderType: "Delivery", paymentMethod: "GCash", referenceNumber: "GC555666777" },
            { id: 6455, customer: "ij", items: ["Cookies & Cream (x2)", "Salted Caramel (x1)"], total: 220.00, status: "pickedup", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 9946, customer: "jul", items: ["Peanut Butter Cup (x1)"], total: 80.00, status: "delivered", date: "06/11/2025", orderType: "Delivery", paymentMethod: "PayMaya", referenceNumber: "PM111222333" },
            { id: 2564, customer: "khhh", items: ["Raspberry Filled (x1)", "Coconut Paradise (x1)"], total: 135.00, status: "cancelled", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 1001, customer: "Juan Dela Cruz", items: ["Classic Glazed (x1)", "Boston Cream (x1)"], total: 120.00, status: "failed", date: "06/11/2025", orderType: "Delivery", paymentMethod: "GCash", referenceNumber: "GC444555666" }
        ];

        // Sample users - MALAYA KANG MAGLAGAY NG KAHIT ANONG USERNAME AT PASSWORD NA 8+ CHARACTERS
        let users = [
            { id: 1, username: "customer1", email: "customer1@example.com", role: "Customer", password: "customer1" },
            { id: 2, username: "customer2", email: "customer2@example.com", role: "Customer", password: "customer2" },
            { id: 3, username: "staff", email: "staff@donutbliss.com", role: "Staff", password: "staff1234" },
            { id: 4, username: "admin", email: "admin@donutbliss.com", role: "Admin", password: "admin1234" }
        ];

        // Current user and cart
        let currentUser = null;
        let userRole = null;
        let cart = [];
        let selectedDeliveryMethod = "pickup";
        let selectedPaymentMethod = null;

        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const userTypes = document.querySelectorAll('.user-type');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const customerPages = document.querySelectorAll('.customer-page');
        const staffPages = document.querySelectorAll('.staff-page');
        const adminPages = document.querySelectorAll('.admin-page');
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const sidebars = document.querySelectorAll('.sidebar');
        const addMenuItemBtn = document.getElementById('add-menu-item');
        const addUserBtn = document.getElementById('add-user');
        const headerCart = document.getElementById('header-cart');
        const navLinks = document.querySelectorAll('nav a');
        const toast = document.getElementById('toast');
        const showRegisterLink = document.getElementById('show-register');
        const showLoginLink = document.getElementById('show-login');
        const customerRegisterForm = document.getElementById('customer-register-form');
        const loginRegisterLink = document.getElementById('login-register-link');
        const checkoutBtn = document.getElementById('checkout-btn');
        const placeOrderBtn = document.getElementById('place-order-btn');
        const backToCartBtn = document.getElementById('back-to-cart');
        const backToHomeBtn = document.getElementById('back-to-home');
        const paymentOptions = document.querySelectorAll('.payment-option');
        const deliveryOptions = document.querySelectorAll('.delivery-option');
        const imagePreview = document.getElementById('image-preview');
        const itemImageInput = document.getElementById('item-image');
        const passwordError = document.getElementById('password-error');
        const adminPasswordError = document.getElementById('admin-password-error');
        const viewOrderHistoryBtn = document.getElementById('view-order-history');

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Start directly with login page
            showPage('login-page');

            // User type selection
            userTypes.forEach(type => {
                type.addEventListener('click', function() {
                    userTypes.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show/hide register form based on user type
                    const selectedType = this.dataset.type;
                    if (selectedType === 'customer') {
                        loginRegisterLink.style.display = 'block';
                    } else {
                        loginRegisterLink.style.display = 'none';
                        customerRegisterForm.classList.remove('active');
                        loginForm.style.display = 'block';
                    }
                });
            });

            // Show register form
            showRegisterLink.addEventListener('click', function(e) {
                e.preventDefault();
                customerRegisterForm.classList.add('active');
                loginForm.style.display = 'none';
                loginRegisterLink.style.display = 'none';
            });

            // Show login form
            showLoginLink.addEventListener('click', function(e) {
                e.preventDefault();
                customerRegisterForm.classList.remove('active');
                loginForm.style.display = 'block';
                loginRegisterLink.style.display = 'block';
            });

            // Password validation
            document.getElementById('reg-password').addEventListener('input', function() {
                validatePassword(this.value, passwordError);
            });

            // Admin password validation
            document.getElementById('user-password').addEventListener('input', function() {
                validatePassword(this.value, adminPasswordError);
            });

            // Login form submission
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const selectedType = document.querySelector('.user-type.active').dataset.type;
                
                if (authenticateUser(username, password, selectedType)) {
                    currentUser = username;
                    userRole = selectedType;
                    showDashboard(selectedType);
                    showToast('Login successful!', 'success');
                } else {
                    showToast('Invalid credentials. Please try again.', 'error');
                }
            });

            // Register form submission
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('reg-username').value;
                const email = document.getElementById('reg-email').value;
                const password = document.getElementById('reg-password').value;
                const confirmPassword = document.getElementById('reg-confirm-password').value;
                
                // Validate password
                if (!validatePassword(password, passwordError)) {
                    showToast('Please fix password requirements', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showToast('Passwords do not match', 'error');
                    return;
                }
                
                // Check if username already exists
                if (users.find(user => user.username === username)) {
                    showToast('Username already exists', 'error');
                    return;
                }
                
                // Create new customer account
                const newId = users.length > 0 ? Math.max(...users.map(user => user.id)) + 1 : 1;
                const newUser = {
                    id: newId,
                    username: username,
                    email: email,
                    role: 'Customer',
                    password: password
                };
                
                users.push(newUser);
                showToast('Account created successfully! Please login.', 'success');
                
                // Switch back to login form
                customerRegisterForm.classList.remove('active');
                loginForm.style.display = 'block';
                loginRegisterLink.style.display = 'block';
                
                // Clear form
                document.getElementById('reg-username').value = '';
                document.getElementById('reg-email').value = '';
                document.getElementById('reg-password').value = '';
                document.getElementById('reg-confirm-password').value = '';
                passwordError.textContent = '';
            });

            // Sidebar navigation
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetPage = this.dataset.page;
                    
                    // Update active link
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show target page
                    if (userRole === 'customer') {
                        customerPages.forEach(page => page.classList.remove('active'));
                        document.getElementById(targetPage).classList.add('active');
                        
                        // Load appropriate content
                        if (targetPage === 'customer-menu') {
                            loadFullMenu();
                        } else if (targetPage === 'customer-cart') {
                            loadCart();
                        } else if (targetPage === 'customer-orders') {
                            loadOrderHistory();
                        }
                    } else if (userRole === 'staff') {
                        staffPages.forEach(page => page.classList.remove('active'));
                        document.getElementById(targetPage).classList.add('active');
                        
                        // Load appropriate content
                        if (targetPage === 'staff-orders') {
                            loadStaffOrders();
                        }
                    } else if (userRole === 'admin') {
                        adminPages.forEach(page => page.classList.remove('active'));
                        document.getElementById(targetPage).classList.add('active');
                        
                        // Load appropriate content
                        if (targetPage === 'admin-menu') {
                            loadAdminMenu();
                        } else if (targetPage === 'admin-users') {
                            loadAdminUsers();
                        } else if (targetPage === 'admin-overview') {
                            loadAdminOrders();
                        }
                    }
                    
                    // Close mobile menu after selection
                    if (window.innerWidth <= 768) {
                        sidebars.forEach(sidebar => sidebar.classList.remove('active'));
                    }
                });
            });

            // Header navigation for customer
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetClass = this.classList[0];
                    
                    if (targetClass === 'nav-home') {
                        showCustomerPage('customer-home');
                    } else if (targetClass === 'nav-menu') {
                        showCustomerPage('customer-menu');
                        loadFullMenu();
                    } else if (targetClass === 'nav-about') {
                        showCustomerPage('customer-about');
                    } else if (targetClass === 'nav-mission') {
                        showCustomerPage('customer-mission');
                    }
                });
            });

            // Header cart button
            headerCart.addEventListener('click', function() {
                showCustomerPage('customer-cart');
                loadCart();
            });

            // Logout buttons
            document.getElementById('customer-logout').addEventListener('click', logout);
            document.getElementById('staff-logout').addEventListener('click', logout);
            document.getElementById('admin-logout').addEventListener('click', logout);
            document.getElementById('customer-header-logout').addEventListener('click', logout);

            // Checkout button
            checkoutBtn.addEventListener('click', function() {
                if (cart.length === 0) {
                    showToast('Your cart is empty. Add some donuts first!', 'error');
                    return;
                }
                
                showCustomerPage('customer-checkout');
                loadCheckoutItems();
            });

            // Back to cart button
            backToCartBtn.addEventListener('click', function() {
                showCustomerPage('customer-cart');
            });

            // Back to home button
            backToHomeBtn.addEventListener('click', function() {
                showCustomerPage('customer-home');
            });

            // View Order History button
            viewOrderHistoryBtn.addEventListener('click', function() {
                // Navigate to order history page
                showCustomerPage('customer-orders');
                loadOrderHistory();
            });

            // Delivery option selection
            deliveryOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Unselect all options
                    deliveryOptions.forEach(opt => {
                        opt.classList.remove('selected');
                        opt.querySelector('input').checked = false;
                    });
                    
                    // Select current option
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                    
                    // Update selected delivery method
                    selectedDeliveryMethod = this.dataset.method;
                    
                    // Update shipping fee
                    updateShippingFee();
                });
            });

            // Payment option selection
            paymentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Unselect all options
                    paymentOptions.forEach(opt => {
                        opt.classList.remove('selected');
                        opt.querySelector('input').checked = false;
                    });
                    
                    // Select current option
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                    
                    // Update selected payment method
                    selectedPaymentMethod = this.dataset.method;
                    
                    // Hide all reference inputs
                    document.querySelectorAll('.reference-input').forEach(input => {
                        input.classList.remove('show');
                    });
                    
                    // Show reference input if needed
                    if (selectedPaymentMethod !== 'cash') {
                        document.getElementById(`${selectedPaymentMethod}-reference`).classList.add('show');
                    }
                });
            });

            // Place order button - AUTOMATICALLY clears cart and redirects to order history
            placeOrderBtn.addEventListener('click', function() {
                if (!selectedPaymentMethod) {
                    showToast('Please select a payment method', 'error');
                    return;
                }
                
                let referenceNumber = '';
                
                if (selectedPaymentMethod !== 'cash') {
                    referenceNumber = document.getElementById(`${selectedPaymentMethod}-ref`).value;
                    if (!referenceNumber) {
                        showToast('Please enter reference number', 'error');
                        return;
                    }
                }
                
                // Create a new order
                const orderId = Math.floor(1000 + Math.random() * 9000);
                const subtotal = calculateCartTotal();
                const shippingFee = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
                const orderTotal = subtotal + shippingFee;
                const orderItems = cart.map(item => `${item.name} (x${item.quantity})`);
                
                const newOrder = {
                    id: orderId,
                    customer: currentUser,
                    items: orderItems,
                    total: orderTotal,
                    status: 'confirmed',
                    date: new Date().toLocaleDateString(),
                    paymentMethod: selectedPaymentMethod,
                    referenceNumber: referenceNumber,
                    orderType: selectedDeliveryMethod === 'pickup' ? 'Pickup' : 'Delivery'
                };
                
                orders.push(newOrder);
                
                // AUTOMATICALLY clear cart after successful order
                cart = [];
                updateCartCount();
                
                // Show order confirmation
                showCustomerPage('order-confirmation');
                showOrderConfirmation(newOrder);
                
                // AUTOMATICALLY redirect to order history after 3 seconds
                setTimeout(() => {
                    showCustomerPage('customer-orders');
                    loadOrderHistory();
                    showToast('Your order has been added to your order history!', 'success');
                }, 3000);
                
                // Refresh staff orders view
                if (userRole === 'staff') {
                    loadStaffOrders();
                } else if (userRole === 'admin') {
                    loadAdminOrders();
                }
            });

            // Mobile menu toggle
            mobileMenuToggle.addEventListener('click', function() {
                const currentDashboard = document.querySelector('.dashboard');
                const currentSidebar = currentDashboard.querySelector('.sidebar');
                currentSidebar.classList.toggle('active');
            });

            // Admin functionality
            addMenuItemBtn.addEventListener('click', function() {
                const name = document.getElementById('item-name').value;
                const price = parseFloat(document.getElementById('item-price').value);
                const description = document.getElementById('item-description').value;
                const imageFile = document.getElementById('item-image').files[0];
                
                if (name && price && description) {
                    const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;
                    
                    // Handle image upload
                    let imageUrl = "https://images.unsplash.com/photo-1551024506-0bccd828d307?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=700&q=80";
                    
                    if (imageFile) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            imageUrl = e.target.result;
                            const newItem = {
                                id: newId,
                                name: name,
                                price: price,
                                description: description,
                                image: imageUrl
                            };
                            
                            menuItems.push(newItem);
                            loadAdminMenu();
                            loadMenuItems();
                            loadFullMenu();
                            
                            // Clear form
                            document.getElementById('item-name').value = '';
                            document.getElementById('item-price').value = '';
                            document.getElementById('item-description').value = '';
                            document.getElementById('item-image').value = '';
                            imagePreview.innerHTML = '<span>Image Preview</span>';
                            
                            showToast('Menu item added successfully!', 'success');
                        };
                        reader.readAsDataURL(imageFile);
                    } else {
                        const newItem = {
                            id: newId,
                            name: name,
                            price: price,
                            description: description,
                            image: imageUrl
                        };
                        
                        menuItems.push(newItem);
                        loadAdminMenu();
                        loadMenuItems();
                        loadFullMenu();
                        
                        // Clear form
                        document.getElementById('item-name').value = '';
                        document.getElementById('item-price').value = '';
                        document.getElementById('item-description').value = '';
                        document.getElementById('item-image').value = '';
                        imagePreview.innerHTML = '<span>Image Preview</span>';
                        
                        showToast('Menu item added successfully!', 'success');
                    }
                } else {
                    showToast('Please fill in all fields', 'error');
                }
            });
            
            addUserBtn.addEventListener('click', function() {
                const username = document.getElementById('user-username').value;
                const email = document.getElementById('user-email').value;
                const password = document.getElementById('user-password').value;
                const role = document.getElementById('user-role').value;
                
                if (username && email && password && role) {
                    // Validate password for new users
                    if (!validatePassword(password, adminPasswordError)) {
                        showToast('Please fix password requirements', 'error');
                        return;
                    }
                    
                    const newId = users.length > 0 ? Math.max(...users.map(user => user.id)) + 1 : 1;
                    const newUser = {
                        id: newId,
                        username: username,
                        email: email,
                        role: role,
                        password: password
                    };
                    
                    users.push(newUser);
                    loadAdminUsers();
                    
                    // Clear form
                    document.getElementById('user-username').value = '';
                    document.getElementById('user-email').value = '';
                    document.getElementById('user-password').value = '';
                    
                    showToast('User added successfully!', 'success');
                } else {
                    showToast('Please fill in all fields', 'error');
                }
            });

            // Image preview for admin menu
            itemImageInput.addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                    };
                    reader.readAsDataURL(file);
                } else {
                    imagePreview.innerHTML = '<span>Image Preview</span>';
                }
            });

            // Load menu items on customer home page
            loadMenuItems();
        });

        // Functions
        function showPage(pageId) {
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        function showCustomerPage(pageId) {
            customerPages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            // Update sidebar active state
            sidebarLinks.forEach(link => link.classList.remove('active'));
            document.querySelector(`.sidebar-link[data-page="${pageId}"]`).classList.add('active');
        }

        function authenticateUser(username, password, type) {
            // For customers, check against registered users
            if (type === 'customer') {
                const user = users.find(u => u.username === username && u.role === 'Customer');
                return user && user.password === password;
            }
            
            // For staff and admin, check against registered users with password validation
            if (type === 'staff' || type === 'admin') {
                const user = users.find(u => u.username === username && u.role.toLowerCase() === type);
                return user && user.password === password;
            }
            
            return false;
        }

        function showDashboard(role) {
            pages.forEach(page => page.classList.remove('active'));
            
            if (role === 'customer') {
                document.getElementById('customer-header').classList.add('active');
                document.getElementById('customer-dashboard').classList.add('active');
                loadMenuItems();
            } else if (role === 'staff') {
                document.getElementById('staff-dashboard').classList.add('active');
                loadStaffOrders();
            } else if (role === 'admin') {
                document.getElementById('admin-dashboard').classList.add('active');
                loadAdminOrders();
            }
        }

        function logout() {
            currentUser = null;
            userRole = null;
            cart = [];
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById('login-page').classList.add('active');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            showToast('You have been logged out successfully.', 'success');
        }

        function showToast(message, type) {
            toast.textContent = message;
            toast.className = 'toast';
            
            if (type === 'success') {
                toast.style.background = 'var(--accent)';
            } else if (type === 'error') {
                toast.style.background = 'var(--primary)';
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function validatePassword(password, errorElement) {
            // Check if password is at least 8 characters
            if (password.length < 8) {
                errorElement.textContent = 'Password must be at least 8 characters';
                return false;
            }
            
            // Check if password contains only numbers
            if (/^\d+$/.test(password)) {
                errorElement.textContent = 'Password cannot contain only numbers';
                return false;
            }
            
            // Check if password contains at least one letter and one number
            if (!/(?=.*[a-zA-Z])(?=.*\d)/.test(password)) {
                errorElement.textContent = 'Password must contain both letters and numbers';
                return false;
            }
            
            errorElement.textContent = '';
            return true;
        }

        function loadMenuItems() {
            const menuContainer = document.getElementById('menu-items');
            menuContainer.innerHTML = '';
            
            menuItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'menu-item';
                itemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="menu-item-footer">
                            <span class="price">₱${item.price.toFixed(2)}</span>
                            <button class="add-to-cart" data-id="${item.id}">Add to Cart</button>
                        </div>
                    </div>
                `;
                menuContainer.appendChild(itemElement);
            });
            
            // Add event listeners to add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    addToCart(itemId);
                });
            });
        }

        function loadFullMenu() {
            const menuContainer = document.getElementById('menu-items-full');
            menuContainer.innerHTML = '';
            
            menuItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'menu-item';
                itemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="menu-item-footer">
                            <span class="price">₱${item.price.toFixed(2)}</span>
                            <button class="add-to-cart" data-id="${item.id}">Add to Cart</button>
                        </div>
                    </div>
                `;
                menuContainer.appendChild(itemElement);
            });
            
            // Add event listeners to add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    addToCart(itemId);
                });
            });
        }

        function addToCart(itemId) {
            const item = menuItems.find(i => i.id === itemId);
            const existingItem = cart.find(i => i.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    image: item.image,
                    quantity: 1
                });
            }
            
            updateCartCount();
            showToast(`${item.name} added to cart!`, 'success');
            
            // Add animation to the cart icon
            const cartIcon = document.querySelector('.cart-icon');
            cartIcon.classList.add('add-to-cart-animation');
            setTimeout(() => {
                cartIcon.classList.remove('add-to-cart-animation');
            }, 500);
        }

        function updateCartCount() {
            const cartCount = cart.reduce((count, item) => count + item.quantity, 0);
            document.querySelector('.cart-count').textContent = cartCount;
        }

        function loadCart() {
            const cartContainer = document.getElementById('cart-items');
            cartContainer.innerHTML = '';
            
            if (cart.length === 0) {
                cartContainer.innerHTML = '<p>Your cart is empty. Add some delicious donuts!</p>';
                document.getElementById('cart-subtotal').textContent = '₱0.00';
                document.getElementById('shipping-fee').textContent = '₱0.00';
                document.getElementById('cart-total').textContent = '₱0.00';
                return;
            }
            
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="cart-item-details">
                        <img src="${item.image}" alt="${item.name}">
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <p>₱${item.price.toFixed(2)} each</p>
                        </div>
                    </div>
                    <div class="cart-item-controls">
                        <div class="quantity-control">
                            <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn increase" data-id="${item.id}">+</button>
                        </div>
                        <span class="price">₱${(item.price * item.quantity).toFixed(2)}</span>
                        <button class="remove-btn" data-id="${item.id}"><i class="fas fa-trash"></i> Remove</button>
                    </div>
                `;
                cartContainer.appendChild(itemElement);
            });
            
            // Add event listeners to quantity controls
            document.querySelectorAll('.decrease').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    updateCartItemQuantity(itemId, -1);
                });
            });
            
            document.querySelectorAll('.increase').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    updateCartItemQuantity(itemId, 1);
                });
            });
            
            document.querySelectorAll('.remove-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    removeFromCart(itemId);
                });
            });
            
            updateCartTotals();
        }

        function updateCartItemQuantity(itemId, change) {
            const item = cart.find(i => i.id === itemId);
            if (item) {
                item.quantity += change;
                
                if (item.quantity <= 0) {
                    removeFromCart(itemId);
                } else {
                    loadCart();
                    updateCartCount();
                }
            }
        }

        function removeFromCart(itemId) {
            const item = cart.find(i => i.id === itemId);
            cart = cart.filter(item => item.id !== itemId);
            loadCart();
            updateCartCount();
            showToast(`${item.name} removed from cart.`, 'success');
        }

        function updateCartTotals() {
            const subtotal = calculateCartTotal();
            const shipping = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
            const total = subtotal + shipping;
            
            document.getElementById('cart-subtotal').textContent = `₱${subtotal.toFixed(2)}`;
            document.getElementById('shipping-fee').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `₱${total.toFixed(2)}`;
        }

        function updateShippingFee() {
            const shipping = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
            const subtotal = calculateCartTotal();
            const total = subtotal + shipping;
            
            document.getElementById('cart-subtotal').textContent = `₱${subtotal.toFixed(2)}`;
            document.getElementById('shipping-fee').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `₱${total.toFixed(2)}`;
            
            // Update checkout page
            document.getElementById('checkout-shipping').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('checkout-total').textContent = `₱${total.toFixed(2)}`;
        }

        function calculateCartTotal() {
            return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        }

        function loadCheckoutItems() {
            const checkoutContainer = document.getElementById('checkout-items');
            checkoutContainer.innerHTML = '';
            
            if (cart.length === 0) {
                checkoutContainer.innerHTML = '<p>Your cart is empty.</p>';
                return;
            }
            
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="cart-item-details">
                        <img src="${item.image}" alt="${item.name}" style="width: 60px; height: 60px;">
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <p>Quantity: ${item.quantity}</p>
                        </div>
                    </div>
                    <div class="price">₱${(item.price * item.quantity).toFixed(2)}</div>
                `;
                checkoutContainer.appendChild(itemElement);
            });
            
            const subtotal = calculateCartTotal();
            const shipping = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
            const total = subtotal + shipping;
            
            document.getElementById('checkout-subtotal').textContent = `₱${subtotal.toFixed(2)}`;
            document.getElementById('checkout-shipping').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('checkout-total').textContent = `₱${total.toFixed(2)}`;
        }

        function showOrderConfirmation(order) {
            const orderDetails = document.getElementById('order-details');
            orderDetails.innerHTML = `
                <p><strong>Order ID:</strong> #${order.id}</p>
                <p><strong>Total Amount:</strong> ₱${order.total.toFixed(2)}</p>
                <p><strong>Order Type:</strong> ${order.orderType}</p>
                <p><strong>Payment Method:</strong> ${order.paymentMethod.charAt(0).toUpperCase() + order.paymentMethod.slice(1)}</p>
                ${order.referenceNumber ? `<p><strong>Reference Number:</strong> ${order.referenceNumber}</p>` : ''}
                <p><strong>Estimated ${order.orderType === 'Pickup' ? 'Pickup' : 'Delivery'}:</strong> ${order.orderType === 'Pickup' ? '15-20 minutes' : '30-45 minutes'}</p>
            `;
        }

        function loadOrderHistory() {
            const orderContainer = document.getElementById('order-history');
            orderContainer.innerHTML = '';
            
            const userOrders = orders.filter(order => order.customer === currentUser);
            
            if (userOrders.length === 0) {
                orderContainer.innerHTML = '<p>You have no order history yet.</p>';
                return;
            }
            
            userOrders.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.className = 'order-card';
                
                let statusClass = '';
                if (order.status === 'confirmed') statusClass = 'status-confirmed';
                if (order.status === 'preparing') statusClass = 'status-preparing';
                if (order.status === 'ready') statusClass = 'status-ready';
                if (order.status === 'pickedup') statusClass = 'status-pickedup';
                if (order.status === 'delivered') statusClass = 'status-delivered';
                if (order.status === 'completed') statusClass = 'status-completed';
                if (order.status === 'cancelled') statusClass = 'status-cancelled';
                if (order.status === 'failed') statusClass = 'status-failed';
                
                orderElement.innerHTML = `
                    <div class="order-header">
                        <div>
                            <h3>Order #${order.id}</h3>
                            <p>Placed on ${order.date}</p>
                            <p>Order Type: ${order.orderType}</p>
                            <p>Payment: ${order.paymentMethod.charAt(0).toUpperCase() + order.paymentMethod.slice(1)}</p>
                            ${order.referenceNumber ? `<p>Reference: ${order.referenceNumber}</p>` : ''}
                        </div>
                        <div class="order-status ${statusClass}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</div>
                    </div>
                    <div class="order-items">
                        ${order.items.map(item => `
                            <div class="order-item">
                                <span>${item}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="order-total">
                        <strong>Total: ₱${order.total.toFixed(2)}</strong>
                    </div>
                    ${createOrderTracking(order)}
                `;
                orderContainer.appendChild(orderElement);
            });
        }

        function createOrderTracking(order) {
            const steps = [
                { id: 'confirmed', label: 'Confirmed', icon: 'fas fa-check' },
                { id: 'preparing', label: 'Preparing', icon: 'fas fa-utensils' },
                { id: 'ready', label: 'Ready', icon: 'fas fa-box' },
                { id: order.orderType === 'Pickup' ? 'pickedup' : 'delivered', label: order.orderType === 'Pickup' ? 'Picked Up' : 'On the Way', icon: order.orderType === 'Pickup' ? 'fas fa-store' : 'fas fa-truck' },
                { id: 'completed', label: 'Completed', icon: 'fas fa-clipboard-check' }
            ];
            
            // For cancelled or failed orders, we show a different tracking
            if (order.status === 'cancelled' || order.status === 'failed') {
                return `
                    <div class="order-tracking">
                        <div class="tracking-header">
                            <div class="tracking-title">Order Status</div>
                        </div>
                        <div class="tracking-info">
                            <div class="tracking-message">
                                <i class="fas fa-exclamation-triangle" style="color: #dc3545; margin-right: 0.5rem;"></i>
                                Your order has been ${order.status}.
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // Find the current step index
            let currentStepIndex = steps.findIndex(step => step.id === order.status);
            
            // For delivered status, we need to check if it's pickup or delivery
            if (order.status === 'delivered') {
                currentStepIndex = steps.findIndex(step => step.id === 'delivered');
            }
            
            // For pickedup status, we need to check if it's pickup or delivery
            if (order.status === 'pickedup') {
                currentStepIndex = steps.findIndex(step => step.id === 'pickedup');
            }
            
            // For completed status, we need to set the current step to the last one
            if (order.status === 'completed') {
                currentStepIndex = steps.length - 1;
            }
            
            // Create the tracking steps HTML
            let stepsHTML = '';
            steps.forEach((step, index) => {
                let stepClass = '';
                if (index < currentStepIndex) {
                    stepClass = 'step-completed';
                } else if (index === currentStepIndex) {
                    stepClass = 'step-active';
                }
                
                stepsHTML += `
                    <div class="tracking-step ${stepClass}">
                        <div class="step-icon">
                            <i class="${step.icon}"></i>
                        </div>
                        <div class="step-label">${step.label}</div>
                    </div>
                `;
            });
            
            // Create tracking message based on current status
            let trackingMessage = '';
            let estimatedTime = '';
            
            switch(order.status) {
                case 'confirmed':
                    trackingMessage = 'Your order has been confirmed and is being processed.';
                    estimatedTime = order.orderType === 'Pickup' ? 
                        'Estimated pickup time: 15-20 minutes' : 
                        'Estimated delivery time: 30-45 minutes';
                    break;
                case 'preparing':
                    trackingMessage = 'Our kitchen is preparing your delicious donuts.';
                    estimatedTime = order.orderType === 'Pickup' ? 
                        'Estimated pickup time: 10-15 minutes' : 
                        'Estimated delivery time: 20-30 minutes';
                    break;
                case 'ready':
                    if (order.orderType === 'Pickup') {
                        trackingMessage = 'Your order is ready for pickup at our store.';
                        estimatedTime = 'Please come to our store to collect your order.';
                    } else {
                        trackingMessage = 'Your order is ready and will be dispatched soon.';
                        estimatedTime = 'Estimated delivery time: 15-25 minutes';
                    }
                    break;
                case 'pickedup':
                    trackingMessage = 'Your order has been picked up. Thank you for your order!';
                    break;
                case 'delivered':
                    trackingMessage = 'Your order is on the way to your location.';
                    estimatedTime = 'Estimated arrival: 10-15 minutes';
                    break;
                case 'completed':
                    trackingMessage = 'Your order has been successfully completed. Thank you for choosing Donut Bliss!';
                    break;
                default:
                    trackingMessage = 'Your order is being processed.';
            }
            
            return `
                <div class="order-tracking">
                    <div class="tracking-header">
                        <div class="tracking-title">Order Status</div>
                    </div>
                    <div class="tracking-steps">
                        ${stepsHTML}
                    </div>
                    <div class="tracking-info">
                        <div class="tracking-message">${trackingMessage}</div>
                        ${estimatedTime ? `<div class="estimated-time">${estimatedTime}</div>` : ''}
                    </div>
                </div>
            `;
        }

        function loadStaffOrders() {
            const ordersTable = document.getElementById('staff-orders-table');
            ordersTable.innerHTML = '';
            
            orders.forEach(order => {
                const row = document.createElement('tr');
                
                let statusButtons = '';
                if (order.status === 'confirmed') {
                    statusButtons = `
                        <button class="action-btn btn-preparing" data-id="${order.id}">Preparing</button>
                        <button class="action-btn btn-cancelled" data-id="${order.id}">Cancel</button>
                    `;
                } else if (order.status === 'preparing') {
                    statusButtons = `
                        <button class="action-btn btn-ready" data-id="${order.id}">Ready</button>
                        <button class="action-btn btn-cancelled" data-id="${order.id}">Cancel</button>
                    `;
                } else if (order.status === 'ready') {
                    if (order.orderType === 'Pickup') {
                        statusButtons = `
                            <button class="action-btn btn-pickedup" data-id="${order.id}">Picked Up</button>
                            `;
                    } else {
                        statusButtons = `
                            <button class="action-btn btn-delivered" data-id="${order.id}">On the Way</button>
                            `;
                    }
                } else if (order.status === 'pickedup') {
                    statusButtons = `
                        <button class="action-btn btn-completed" data-id="${order.id}">Completed</button>
                    `;
                } else if (order.status === 'delivered') {
                    statusButtons = `
                        <button class="action-btn btn-completed" data-id="${order.id}">Completed</button>
                        <button class="action-btn btn-failed" data-id="${order.id}">Failed</button>
                    `;
                } else if (order.status === 'completed' || order.status === 'cancelled' || order.status === 'failed') {
                    statusButtons = '<span>Order Finalized</span>';
                }
                
                row.innerHTML = `
                    <td>#${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${order.items.join(', ')}</td>
                    <td>₱${order.total.toFixed(2)}</td>
                    <td>${order.orderType}</td>
                    <td>${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</td>
                    <td>${order.paymentMethod}</td>
                    <td>${order.referenceNumber || 'N/A'}</td>
                    <td>${statusButtons}</td>
                `;
                ordersTable.appendChild(row);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.btn-confirmed').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'confirmed');
                });
            });
            
            document.querySelectorAll('.btn-preparing').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'preparing');
                });
            });
            
            document.querySelectorAll('.btn-ready').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'ready');
                });
            });
            
            document.querySelectorAll('.btn-pickedup').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'pickedup');
                });
            });
            
            document.querySelectorAll('.btn-delivered').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'delivered');
                });
            });
            
            document.querySelectorAll('.btn-completed').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'completed');
                });
            });
            
            document.querySelectorAll('.btn-cancelled').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'cancelled');
                });
            });
            
            document.querySelectorAll('.btn-failed').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'failed');
                });
            });
        }

        function updateOrderStatus(orderId, newStatus) {
            // Update in orders
            const order = orders.find(order => order.id === orderId);
            if (order) {
                order.status = newStatus;
            }
            
            // Reload the orders table
            loadStaffOrders();
            
            // If admin is logged in, refresh their view too
            if (userRole === 'admin') {
                loadAdminOrders();
            }
            
            // If customer is logged in and this is their order, refresh their order history
            // This is the key fix - always refresh the customer's order history when their order status changes
            if (currentUser && order && order.customer === currentUser) {
                // If customer is currently viewing their order history, refresh it
                if (document.getElementById('customer-orders').classList.contains('active')) {
                    loadOrderHistory();
                }
                // Show a notification to the customer
                showToast(`Your order #${orderId} status has been updated to ${newStatus}.`, 'success');
            }
            
            showToast(`Order #${orderId} status updated to ${newStatus}.`, 'success');
        }

        function loadAdminOrders() {
            const ordersTable = document.getElementById('admin-orders-table');
            ordersTable.innerHTML = '';
            
            orders.forEach(order => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                if (order.status === 'confirmed') statusClass = 'status-confirmed';
                if (order.status === 'preparing') statusClass = 'status-preparing';
                if (order.status === 'ready') statusClass = 'status-ready';
                if (order.status === 'pickedup') statusClass = 'status-pickedup';
                if (order.status === 'delivered') statusClass = 'status-delivered';
                if (order.status === 'completed') statusClass = 'status-completed';
                if (order.status === 'cancelled') statusClass = 'status-cancelled';
                if (order.status === 'failed') statusClass = 'status-failed';
                
                row.innerHTML = `
                    <td>#${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${order.items.join(', ')}</td>
                    <td>₱${order.total.toFixed(2)}</td>
                    <td><span class="order-status ${statusClass}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span></td>
                    <td>✔</td>
                    <td>${order.date}</td>
                `;
                ordersTable.appendChild(row);
            });
        }

        function loadAdminMenu() {
            const menuTable = document.getElementById('admin-menu-table');
            menuTable.innerHTML = '';
            
            menuItems.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td>${item.description}</td>
                    <td>₱${item.price.toFixed(2)}</td>
                    <td><img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px; object-fit: cover;"></td>
                    <td>
                        <button class="action-btn" onclick="editMenuItem(${item.id})">Edit</button>
                        <button class="action-btn" style="background: #f8d7da; color: #721c24;" onclick="deleteMenuItem(${item.id})">Delete</button>
                    </td>
                `;
                menuTable.appendChild(row);
            });
        }

        function loadAdminUsers() {
            const usersTable = document.getElementById('admin-users-table');
            usersTable.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>${user.role}</td>
                    <td>
                        <button class="action-btn" onclick="editUser(${user.id})">Edit</button>
                        <button class="action-btn" style="background: #f8d7da; color: #721c24;" onclick="deleteUser(${user.id})">Delete</button>
                    </td>
                `;
                usersTable.appendChild(row);
            });
        }

        // Admin functions
        function editMenuItem(id) {
            const item = menuItems.find(i => i.id === id);
            if (item) {
                document.getElementById('item-name').value = item.name;
                document.getElementById('item-price').value = item.price;
                document.getElementById('item-description').value = item.description;
                imagePreview.innerHTML = `<img src="${item.image}" alt="Preview">`;
                
                // Change button to update
                const addBtn = document.getElementById('add-menu-item');
                addBtn.textContent = 'Update Item';
                addBtn.onclick = function() {
                    updateMenuItem(id);
                };
            }
        }

        function updateMenuItem(id) {
            const name = document.getElementById('item-name').value;
            const price = parseFloat(document.getElementById('item-price').value);
            const description = document.getElementById('item-description').value;
            const imageFile = document.getElementById('item-image').files[0];
            
            if (name && price && description) {
                const itemIndex = menuItems.findIndex(i => i.id === id);
                if (itemIndex !== -1) {
                    // Handle image update
                    if (imageFile) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            menuItems[itemIndex].image = e.target.result;
                            menuItems[itemIndex].name = name;
                            menuItems[itemIndex].price = price;
                            menuItems[itemIndex].description = description;
                            
                            loadAdminMenu();
                            loadMenuItems();
                            loadFullMenu();
                            
                            // Reset form and button
                            document.getElementById('item-name').value = '';
                            document.getElementById('item-price').value = '';
                            document.getElementById('item-description').value = '';
                            document.getElementById('item-image').value = '';
                            imagePreview.innerHTML = '<span>Image Preview</span>';
                            
                            const addBtn = document.getElementById('add-menu-item');
                            addBtn.textContent = 'Add Item';
                            addBtn.onclick = function() {
                                const name = document.getElementById('item-name').value;
                                const price = parseFloat(document.getElementById('item-price').value);
                                const description = document.getElementById('item-description').value;
                                const imageFile = document.getElementById('item-image').files[0];
                                
                                if (name && price && description) {
                                    const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;
                                    
                                    // Handle image upload
                                    let imageUrl = "https://images.unsplash.com/photo-1551024506-0bccd828d307?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=700&q=80";
                                    
                                    if (imageFile) {
                                        const reader = new FileReader();
                                        reader.onload = function(e) {
                                            imageUrl = e.target.result;
                                            const newItem = {
                                                id: newId,
                                                name: name,
                                                price: price,
                                                description: description,
                                                image: imageUrl
                                            };
                                            
                                            menuItems.push(newItem);
                                            loadAdminMenu();
                                            loadMenuItems();
                                            loadFullMenu();
                                            
                                            // Clear form
                                            document.getElementById('item-name').value = '';
                                            document.getElementById('item-price').value = '';
                                            document.getElementById('item-description').value = '';
                                            document.getElementById('item-image').value = '';
                                            imagePreview.innerHTML = '<span>Image Preview</span>';
                                            
                                            showToast('Menu item added successfully!', 'success');
                                        };
                                        reader.readAsDataURL(imageFile);
                                    } else {
                                        const newItem = {
                                            id: newId,
                                            name: name,
                                            price: price,
                                            description: description,
                                            image: imageUrl
                                        };
                                        
                                        menuItems.push(newItem);
                                        loadAdminMenu();
                                        loadMenuItems();
                                        loadFullMenu();
                                        
                                        // Clear form
                                        document.getElementById('item-name').value = '';
                                        document.getElementById('item-price').value = '';
                                        document.getElementById('item-description').value = '';
                                        document.getElementById('item-image').value = '';
                                        imagePreview.innerHTML = '<span>Image Preview</span>';
                                        
                                        showToast('Menu item added successfully!', 'success');
                                    }
                                } else {
                                    showToast('Please fill in all fields', 'error');
                                }
                            };
                            
                            showToast('Menu item updated successfully!', 'success');
                        };
                        reader.readAsDataURL(imageFile);
                    } else {
                        menuItems[itemIndex].name = name;
                        menuItems[itemIndex].price = price;
                        menuItems[itemIndex].description = description;
                        
                        loadAdminMenu();
                        loadMenuItems();
                        loadFullMenu();
                        
                        // Reset form and button
                        document.getElementById('item-name').value = '';
                        document.getElementById('item-price').value = '';
                        document.getElementById('item-description').value = '';
                        document.getElementById('item-image').value = '';
                        imagePreview.innerHTML = '<span>Image Preview</span>';
                        
                        const addBtn = document.getElementById('add-menu-item');
                        addBtn.textContent = 'Add Item';
                        addBtn.onclick = function() {
                            const name = document.getElementById('item-name').value;
                            const price = parseFloat(document.getElementById('item-price').value);
                            const description = document.getElementById('item-description').value;
                            const imageFile = document.getElementById('item-image').files[0];
                            
                            if (name && price && description) {
                                const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;
                                
                                // Handle image upload
                                let imageUrl = "https://images.unsplash.com/photo-1551024506-0bccd828d307?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=700&q=80";
                                
                                if (imageFile) {
                                    const reader = new FileReader();
                                    reader.onload = function(e) {
                                        imageUrl = e.target.result;
                                        const newItem = {
                                            id: newId,
                                            name: name,
                                            price: price,
                                            description: description,
                                            image: imageUrl
                                        };
                                        
                                        menuItems.push(newItem);
                                        loadAdminMenu();
                                        loadMenuItems();
                                        loadFullMenu();
                                        
                                        // Clear form
                                        document.getElementById('item-name').value = '';
                                        document.getElementById('item-price').value = '';
                                        document.getElementById('item-description').value = '';
                                        document.getElementById('item-image').value = '';
                                        imagePreview.innerHTML = '<span>Image Preview</span>';
                                        
                                        showToast('Menu item added successfully!', 'success');
                                    };
                                    reader.readAsDataURL(imageFile);
                                } else {
                                    const newItem = {
                                        id: newId,
                                        name: name,
                                        price: price,
                                        description: description,
                                        image: imageUrl
                                    };
                                    
                                    menuItems.push(newItem);
                                    loadAdminMenu();
                                    loadMenuItems();
                                    loadFullMenu();
                                    
                                    // Clear form
                                    document.getElementById('item-name').value = '';
                                    document.getElementById('item-price').value = '';
                                    document.getElementById('item-description').value = '';
                                    document.getElementById('item-image').value = '';
                                    imagePreview.innerHTML = '<span>Image Preview</span>';
                                    
                                    showToast('Menu item added successfully!', 'success');
                                }
                            } else {
                                showToast('Please fill in all fields', 'error');
                            }
                        };
                        
                        showToast('Menu item updated successfully!', 'success');
                    }
                }
            } else {
                showToast('Please fill in all fields', 'error');
            }
        }

        function deleteMenuItem(id) {
            if (confirm('Are you sure you want to delete this menu item?')) {
                menuItems = menuItems.filter(item => item.id !== id);
                loadAdminMenu();
                loadMenuItems();
                loadFullMenu();
                showToast('Menu item deleted successfully!', 'success');
            }
        }

        function editUser(id) {
            const user = users.find(u => u.id === id);
            if (user) {
                document.getElementById('user-username').value = user.username;
                document.getElementById('user-email').value = user.email;
                document.getElementById('user-role').value = user.role.toLowerCase();
                
                // Change button to update
                const addBtn = document.getElementById('add-user');
                addBtn.textContent = 'Update User';
                addBtn.onclick = function() {
                    updateUser(id);
                };
            }
        }

        function updateUser(id) {
            const username = document.getElementById('user-username').value;
            const email = document.getElementById('user-email').value;
            const role = document.getElementById('user-role').value;
            
            if (username && email && role) {
                const userIndex = users.findIndex(u => u.id === id);
                if (userIndex !== -1) {
                    users[userIndex].username = username;
                    users[userIndex].email = email;
                    users[userIndex].role = role;
                    
                    loadAdminUsers();
                    
                    // Reset form and button
                    document.getElementById('user-username').value = '';
                    document.getElementById('user-email').value = '';
                    document.getElementById('user-password').value = '';
                    
                    const addBtn = document.getElementById('add-user');
                    addBtn.textContent = 'Add User';
                    addBtn.onclick = function() {
                        const username = document.getElementById('user-username').value;
                        const email = document.getElementById('user-email').value;
                        const password = document.getElementById('user-password').value;
                        const role = document.getElementById('user-role').value;
                        
                        if (username && email && password && role) {
                            // Validate password for new users
                            if (!validatePassword(password, adminPasswordError)) {
                                showToast('Please fix password requirements', 'error');
                                return;
                            }
                            
                            const newId = users.length > 0 ? Math.max(...users.map(user => user.id)) + 1 : 1;
                            const newUser = {
                                id: newId,
                                username: username,
                                email: email,
                                role: role,
                                password: password
                            };
                            
                            users.push(newUser);
                            loadAdminUsers();
                            
                            // Clear form
                            document.getElementById('user-username').value = '';
                            document.getElementById('user-email').value = '';
                            document.getElementById('user-password').value = '';
                            
                            showToast('User added successfully!', 'success');
                        } else {
                            showToast('Please fill in all fields', 'error');
                        }
                    };
                    
                    showToast('User updated successfully!', 'success');
                }
            } else {
                showToast('Please fill in all fields', 'error');
            }
        }

        function deleteUser(id) {
            if (confirm('Are you sure you want to delete this user?')) {
                users = users.filter(user => user.id !== id);
                loadAdminUsers();
                showToast('User deleted successfully!', 'success');
            }
        }
    </script>
</body>
</html>